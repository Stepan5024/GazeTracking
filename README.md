# Технология компьютерного зрения для распознавания глазного яблока человека

Этот проект является курсовой работой в МАИ по предмету Систем искусственного интеллекта.
Код предоставляет собой **систему отслеживания глаз на основе веб-камеры**. Система дает вам точное положение зрачков (помечая крестиком зрачок) и направление взгляда в режиме реального времени.



## Установка

Скачайте (склонируйте репозиторий):

```shell
git clone https://github.com/antoinelame/GazeTracking.git
```

### Для Pip установки зависимостей
Установка библиотек (NumPy, OpenCV, Dlib):

```shell
pip install -r requirements.txt
```
> Библиотека Dlib имеет четыре основных необходимых компонента: Boost, Boost.Python, CMake and X11/XQuartx. Если у вас их нет, вы можете [прочитать эту статью](https://www.pyimagesearch.com/2017/03/27/how-to-install-dlib/), чтобы узнать, как их легко установить.


### Для установки через Anaconda 
Установка библиотек  (NumPy, OpenCV, Dlib):

```shell
conda env create --file environment.yml
#после создания среды, активация его
conda activate GazeTracking
```


### Запуск решения

Запуск кода:

```shell
python example.py
```


## Разработанные функции

В следующих примерах, `gaze` ссылается на экземпляр `GazeTracking` класса.

### Обновление кадра с камеры

```python
gaze.refresh(frame)
```

Передает кадр для анализа (numpy.ndarray). Для работы с видеопотоком, вам нужно поместить эту инструкцию в цикл, как в примере выше.

### Положение левого зрачка

```python
gaze.pupil_left_coords()
```

Возвращает координаты (x,y) левого зрачка.

### Положение правого зрачка

```python
gaze.pupil_right_coords()
```

Возвращает координаты (x,y) правого зрачка.

### Смотрим ли влевую часть экрана?

```python
gaze.is_left()
```

Возвращает `True`, если пользователь смотрит влево.

### Смотрим ли вправую часть экрана?

```python
gaze.is_right()
```

Возвращает `True`, если пользователь смотрит вправо.

### Смотрим ли в центр экрана?

```python
gaze.is_center()
```

Возвращает значение "True", если пользователь смотрит в центр.

### Горизонтальное направление взгляда

```python
ratio = gaze.horizontal_ratio()
```

Возвращает число от 0,0 до 1,0, указывающее горизонтальное направление взгляда. Крайний правый угол равен 0,0, центральный - 0,5, а крайний левый - 1,0.

### Вертикальное направление взгляда

```python
ratio = gaze.vertical_ratio()
```

Возвращает число от 0,0 до 1,0, указывающее вертикальное направление взгляда. Крайняя верхняя точка равна 0,0, центральная - 0,5, а крайняя нижняя - 1,0.

### Моргание

```python
gaze.is_blinking()
```

Возвращает значение `True`, если глаза пользователя закрыты.

### Кадр веб-камеры

```python
frame = gaze.annotated_frame()
```

Возвращает основной кадр с выделенными зрачками.


